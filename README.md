# 10.6_Incidenr_managment_Aleksandr_Molokov

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

# Ответ

# Постмортен

# Краткое описание инцидента
В 22:52 UTC 21 октября в результате кратковременной потери связи между сетевым узлом и основным центром обработки данных, произошла цепочка событий которая привела к уходшению качества обслуживания. 


# События предшествующие инциденту
В 22:52 21 октября проводились плановые работы по техническому обслуживанию для замены вышедшего из строя оптического оборудования 100G


# Причина инцидента
Потеря связи между сетевым узлом  и основным центром обработки данных 


# Влияние инцидента
Инцидент затронул несколько внутренних систем, что привело к отображению устаревшей, непоследовательной информации и ухудшению качества обслуживания на 24 часа и 11 минут.


# Обнаружение
Инцидент был замечен спустя 10 минут ответсвенными инженерами. Затем были привлечены ответсвенные инженеры из команды разработки.


# Реакция
Были подготавлены дополнительные копии баз MySQL для чтения в общедоступном облаке, что позволило распределять объем запросов на чтение по большему количеству серверов.Снижение совокупного использования реплик чтения позволило репликации наверстать упущенное

# Таймлайн
21 октября 2018 22:52 - Разрав соединения между сетевым узлом и центром обработки данных (43 секунды)

21 октября 2018 22:54 - Внутренние системы мониторинга сгенерировали предупреждения о сбоях

21 октября 2018 23:02 - Отвественные инженера зафиксировали сбои в топологии многих кластеров

21 октября 2018 23:07 - Команда реагирования решила вручную заблокировать наш внутренний инструмент развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений, через 2 минуты был инциденту был присвое желтый статус, а еще через 2 - красный

21 октября 2018 23:13 - Были вызваны дополнительные инженера из команды разработки для опредеоения текущего состояния и дальнейших действий

21 октября 2018 23:19 - Принято решение приостановить push запросы, приоритетное внимание было отадно сохранению целостности данных, а не удобству использования сайта и времени на восстановление

22 октября 2018 00:05 - Инженеры начали составлять план по восстановлению системы, идея состояла в востановлении системы из резервных копий

22 октября 2018 00:41 - Запуск процесса резервного копирования

22 октября 2018 06:51 - Несколько кластеров завершили восстановление из резервных копий в нашем центре обработки данных на Восточном побережье США и начали репликацию новых данных с Западного побережья

22 октября 2018 07:46  - Публикация сособщения о произошедшем инциденте

22 октября 2018 11:12 - Все праймериз баз данных снова созданы на Восточном побережье США

22 октября 2018 13:15  - Началась подготовка дополнительных копии MySQL для чтения в общедоступном облаке на Восточном побережье США

22 октября 2018 16:24 - Выполнен переход на исходную топологию после синхронизации реплик

22 октября 2018 16:45 - Предприняты меры по балансировке нагрузки

22 октября 2018 23:03  - Сервис начал рабоать в штатном режиме

# Действия предпринятые для недопущения подобного инцидента вдальнейшем

- Будет изменена конфигурация Orchestrator, чтобы предотвратить распространение праймериз базы данных через региональные границы.

- Был инициирован проект  по поддержке обслуживания трафика GitHub из нескольких центров обработки данных. Цель этого проекта - поддерживать резервирование N + 1 на уровне объекта. Цель этой работы - перенести полный отказ одного центра обработки данных без воздействия на пользователя.



